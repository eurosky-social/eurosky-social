apiVersion: v1
kind: ConfigMap
metadata:
  name: pds-config
  namespace: ${namespace}
  labels:
    app: pds
    app.kubernetes.io/name: pds
    app.kubernetes.io/component: server
data:
  PDS_PORT: "2583"  # Official PDS port (uses PDS_PORT, not PORT)
  PDS_HOSTNAME: "${pds_hostname}"
  
  # System database locations (explicit paths for Litestream config)
  PDS_DATA_DIRECTORY: "${pds_data_directory}"
  PDS_ACCOUNT_DB_LOCATION: "${pds_account_db_location}"
  PDS_SEQUENCER_DB_LOCATION: "${pds_sequencer_db_location}"
  PDS_DID_CACHE_DB_LOCATION: "${pds_did_cache_db_location}"

  # Actor store (per-user databases)
  PDS_ACTOR_STORE_DIRECTORY: "${pds_actor_store_location}"

  PDS_BLOBSTORE_S3_BUCKET: "${pds_blobstore_bucket}"
  PDS_BLOBSTORE_S3_REGION: "${pds_blobstore_region}"
  PDS_BLOBSTORE_S3_ENDPOINT: "${pds_blobstore_endpoint}"
  PDS_DID_PLC_URL: "${pds_did_plc_url}"
  PDS_BSKY_APP_VIEW_URL: "${pds_bsky_app_view_url}"
  PDS_BSKY_APP_VIEW_DID: "${pds_bsky_app_view_did}"
  PDS_REPORT_SERVICE_URL: "${pds_report_service_url}"
  PDS_REPORT_SERVICE_DID: "${pds_report_service_did}"
  PDS_CRAWLERS: "https://bsky.network"
  PDS_INVITE_REQUIRED: "true"
  PDS_BLOB_UPLOAD_LIMIT: "${pds_blob_upload_limit}"
  LOG_ENABLED: "${pds_log_enabled}"
  PDS_EMAIL_FROM_ADDRESS: "${pds_email_from_address}"
  PDS_RECOVERY_DID_KEY: "${pds_recovery_did_key}"

  PDS_SERVICE_NAME: "Eurosky PDS"
  # TODO: Add PDS_SQLITE_DISABLE_WAL_AUTO_CHECKPOINT to true for Litestream backup
  # TODO: Add PDS_DEV_MODE: "false" - Disable development mode for production
  # TODO: Add PDS_RATE_LIMITS_ENABLED: "true" - Enable rate limiting for DDoS protection
  # TODO: Add PDS_CONTACT_EMAIL_ADDRESS: "support@eurosky.example" - User support contact
  # TODO: Add PDS_PRIVACY_POLICY_URL: "https://eurosky.example/privacy" - Legal requirement
  # TODO: Add PDS_TERMS_OF_SERVICE_URL: "https://eurosky.example/terms" - Legal requirement
